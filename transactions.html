<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Transaction Dashboard</title>
    <style>
        :root {
            --bg: #0b0f19;
            --card: #161b2a;
            --text: #f8fafc;
            --accent: #38bdf8;
            --border: #2d3748;
            --pos: #10b981;
            --neg: #f43f5e;
        }

        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }

        .stats { display: flex; gap: 20px; margin-bottom: 25px; }
        .stat-card { flex: 1; background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); text-align: center; }
        .stat-card span { color: #94a3b8; font-size: 0.8rem; text-transform: uppercase; }
        .stat-card h2 { margin: 10px 0 0; font-size: 1.8rem; }

        .controls { display: grid; grid-template-columns: 220px 1fr; gap: 20px; margin-bottom: 30px; }
        .filter-panel { background: var(--card); padding: 20px; border-radius: 12px; border: 1px solid var(--border); }
        .filter-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; border-bottom: 1px solid var(--border); padding-bottom: 8px; }
        .filter-title { font-weight: bold; color: var(--accent); }

        .all-toggle { font-size: 0.75rem; color: var(--accent); cursor: pointer; text-decoration: underline; background: none; border: none; padding: 0; }

        .check-group { max-height: 200px; overflow-y: auto; display: flex; flex-direction: column; gap: 8px; padding-right: 5px; }
        .check-item { font-size: 0.85rem; display: flex; align-items: center; gap: 10px; cursor: pointer; }

        .table-wrap { background: var(--card); border-radius: 12px; overflow: hidden; border: 1px solid var(--border); }
        table { width: 100%; border-collapse: collapse; }
        th { text-align: left; padding: 15px; background: #1e293b; color: var(--accent); font-size: 0.75rem; text-transform: uppercase; }
        td { padding: 12px 15px; border-top: 1px solid var(--border); font-size: 0.85rem; }
        tr:hover { background: #1f2937; }

        .neg-val { color: var(--neg); font-weight: 600; }
        .pos-val { color: var(--pos); font-weight: 600; }
        .count-info { margin-bottom: 10px; font-size: 0.8rem; color: #94a3b8; }
    </style>
</head>
<body>

<div class="container">
    <div class="stats">
        <div class="stat-card"><span>Expenses</span><h2 id="total-out" class="neg-val">$0.00</h2></div>
        <div class="stat-card"><span>Payments</span><h2 id="total-in" class="pos-val">$0.00</h2></div>
        <div class="stat-card"><span>Net Flow</span><h2 id="net-flow">$0.00</h2></div>
    </div>

    <div class="count-info" id="count-display">Showing 0 of 0 transactions</div>

    <div class="controls">
        <div class="filter-panel">
            <div class="filter-header">
                <span class="filter-title">Accounts</span>
                <button class="all-toggle" onclick="toggleAll('.acc-check', true)">All</button>
            </div>
            <div class="check-group">
                <label class="check-item"><input type="checkbox" class="acc-check" value="7934" checked> Chase 7934</label>
                <label class="check-item"><input type="checkbox" class="acc-check" value="6514" checked> Chase 6514</label>
            </div>
        </div>

        <div class="filter-panel">
            <div class="filter-header">
                <span class="filter-title">Categories</span>
                <div>
                    <button class="all-toggle" onclick="toggleAll('.cat-check', true)">Select All</button> |
                    <button class="all-toggle" onclick="toggleAll('.cat-check', false)">None</button>
                </div>
            </div>
            <div id="cat-filters" class="check-group"></div>
        </div>
    </div>

    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Account</th>
                    <th>Description</th>
                    <th>Category</th>
                    <th style="text-align: right;">Amount</th>
                </tr>
            </thead>
            <tbody id="table-body"></tbody>
        </table>
    </div>
</div>

<script>
    // Full raw data integration (mapping exact structure)
    const raw7934 = [
        ["2025-12-16","TST* The Roost Longmont",62.17,"Dining"],["2025-12-17","TST* Pharaoh's Billiards",9.86,"Entertainment"],["2025-12-19","Wendys 3789",26.85,"Dining"],["2025-12-19","TST* Prost Northglenn HQ",15.16,"Dining"],["2025-12-19","TST* Prost Northglenn HQ",30.09,"Dining"],["2025-12-22","OnlyFans.com*B",23.47,"Entertainment"],["2025-12-22","OnlyFans.com*A",4.27,"Entertainment"],["2025-12-23","Gotinder.com/help",39.99,"Services"],["2025-12-23","OnlyFans*J London",53.35,"Entertainment"],["2025-12-23","OnlyFans.com*A",4.27,"Entertainment"],["2025-12-23","Payment Thank You-Mobile",-143.93,"Payment"],["2025-12-30","TST* The Boot Grill",91,"Dining"],["2025-12-31","TST* Wicked Tequila Room",84.97,"Dining"],["2026-01-01","SQ *Ozo Coffee Roasters",21.36,"Dining"],["2026-01-01","7-ELEVEN 35708",14.77,"Gas"],["2026-01-02","OnlyFans.com*B",23.47,"Entertainment"],["2026-01-02","OnlyFans.com*A",4.27,"Entertainment"],["2026-01-03","OnlyFans.com*A",4.27,"Entertainment"],["2026-01-05","ONLYFANS",10,"Entertainment"],["2026-01-05","ONLYFANS",5.15,"Entertainment"],["2026-01-05","ONLYFANS",6.35,"Entertainment"],["2026-01-06","ONLYFANS",11,"Entertainment"],["2026-01-06","ONLYFANS",10.15,"Entertainment"],["2026-01-08","ONLYFANS",5.15,"Entertainment"],["2026-01-08","ONLYFANS",10,"Entertainment"],["2026-01-09","ONLYFANS",10,"Entertainment"],["2026-01-10","ONLYFANS",5.15,"Entertainment"],["2026-01-10","TST* Tom Davis Saloon",10.3,"Dining"],["2026-01-11","TST* Tom Davis Saloon",9.22,"Dining"],["2026-01-11","Lyft",28.69,"Transportation"],["2026-01-11","Lyft",18.37,"Transportation"],["2026-01-12","Lyft",12.75,"Transportation"],["2026-01-16","CFC Parkmobile Parking",14,"Transportation"],["2026-01-16","TST* Chippers Horsetooth",53.82,"Entertainment"],["2026-01-17","TST* The Whiskey Fort Collins",51.09,"Dining"],["2026-01-17","Payment Thank You-Mobile",-350,"Payment"],["2026-01-21","Dont Tell Comedy",54,"Entertainment"],["2026-01-22","Lyft",28.92,"Transportation"],["2026-01-22","Lyft",22.91,"Transportation"],["2026-01-23","Penrose Taphouse & Eatery",51,"Dining"],["2026-01-23","2323 Neven 321-399-1661 FL",91.19,"Services"],["2026-01-24","Gotinder.com/help",39.99,"Services"],["2026-01-25","Lyft",30.29,"Transportation"],["2026-01-25","Lyft",16.92,"Transportation"],["2026-01-28","OnlyFans.com*B",23.47,"Entertainment"],["2026-01-28","OnlyFans.com*A",4.27,"Entertainment"],["2026-01-30","TST* Tom Davis Saloon",9.22,"Dining"],["2026-01-31","Penrose Taphouse & Eatery",20.17,"Dining"],["2026-01-31","OnlyFans.com*A",4.27,"Entertainment"],["2026-02-01","OnlyFans.com*A",4.27,"Entertainment"],["2026-02-02","OnlyFans.com*A",4.27,"Entertainment"],["2026-02-05","Payment Thank You-Mobile",-400,"Payment"],["2026-02-08","7-ELEVEN 35708",15.61,"Gas"],["2026-02-12","Penrose Taphouse & Eatery",45.33,"Dining"],["2026-02-14","OnlyFans.com*B",23.47,"Entertainment"],["2026-02-14","OnlyFans.com*A",4.27,"Entertainment"]
    ];

    const raw6514 = [
        ["12/18/25","WOODS SUPERMARKET",18.79,"Groceries"],["12/18/25","KING SOOPERS",91.28,"Groceries"],["12/18/25","WALGREENS",30,"Health"],["12/18/25","BURGER KING",7.66,"Dining"],["12/18/25","7-ELEVEN",18.01,"Gas"],["12/19/25","Payment Thank You",-399,"Payment"],["12/19/25","CHIPOTLE",10.08,"Dining"],["12/19/25","CO JUDICIAL",24,"Services"],["12/19/25","SPROUTS",47.52,"Groceries"],["12/20/25","SPROUTS",64.24,"Groceries"],["12/21/25","KING SOOPERS",137.53,"Groceries"],["12/21/25","AMAZON",36.43,"Shopping"],["12/22/25","KING SOOPERS",33.64,"Groceries"],["12/22/25","7-ELEVEN",23,"Gas"],["12/23/25","SPROUTS",29.42,"Groceries"],["12/24/25","SAFEWAY",55.19,"Groceries"],["12/26/25","KING SOOPERS",41.22,"Groceries"],["12/26/25","7-ELEVEN",36.51,"Gas"],["12/27/25","KING SOOPERS",122.18,"Groceries"],["12/29/25","SPROUTS",31.02,"Groceries"],["12/30/25","KING SOOPERS",42.01,"Groceries"],["12/30/25","LYFT",16.74,"Travel"],["12/31/25","LYFT",11.91,"Travel"],["01/02/26","MATCH.COM",39.99,"Services"],["01/03/26","KING SOOPERS",152.66,"Groceries"],["01/05/26","GREAT CLIPS",29,"Services"],["01/05/26","KING SOOPERS",137.46,"Groceries"],["01/06/26","CO DRIVER SRVS",174.08,"Services"],["01/07/26","Amazon.com",36.34,"Shopping"],["01/07/26","WORLD KNIFE THROW",171.98,"Entertainment"],["01/09/26","MARY'S MOUNTAIN COOKIE",18.01,"Dining"],["01/10/26","TASTYHARMONY",96.79,"Dining"],["01/10/26","KING SOOPERS",17.2,"Groceries"],["01/12/26","CHIPOTLE",16.14,"Dining"],["01/14/26","KING SOOPERS",115.34,"Groceries"],["01/14/26","7-ELEVEN",26.01,"Gas"],["01/15/26","Amazon.com",31.18,"Shopping"],["01/16/26","Amazon.com",16.16,"Shopping"],["01/16/26","Amazon.com",10.75,"Shopping"],["01/16/26","KING SOOPERS",74.22,"Groceries"],["01/18/26","KING SOOPERS",135.1,"Groceries"],["01/19/26","Payment Thank You",-500,"Payment"],["01/19/26","Amazon.com",10.74,"Shopping"],["01/21/26","KING SOOPERS",54.43,"Groceries"]
    ];

    function mapData(arr, acc) {
        return arr.map((r, i) => ({
            date: r[0],
            desc: r[1],
            amt: parseFloat(r[2]),
            cat: r[3],
            acc: acc
        }));
    }

    const allData = [...mapData(raw7934, '7934'), ...mapData(raw6514, '6514')];

    // Populate Category Filters
    const categories = [...new Set(allData.map(d => d.cat))].sort();
    const catContainer = document.getElementById('cat-filters');
    categories.forEach(c => {
        catContainer.innerHTML += `<label class="check-item"><input type="checkbox" class="cat-check" value="${c}" checked> ${c}</label>`;
    });

    function toggleAll(selector, state) {
        document.querySelectorAll(selector).forEach(cb => cb.checked = state);
        render();
    }

    function render() {
        const selAcc = Array.from(document.querySelectorAll('.acc-check:checked')).map(i => i.value);
        const selCat = Array.from(document.querySelectorAll('.cat-check:checked')).map(i => i.value);

        const filtered = allData.filter(d => selAcc.includes(d.acc) && selCat.includes(d.cat));

        let outSum = 0, inSum = 0;
        const tbody = document.getElementById('table-body');
        tbody.innerHTML = '';

        filtered.forEach(d => {
            if (d.amt > 0) outSum += d.amt; else inSum += Math.abs(d.amt);
            tbody.innerHTML += `
                <tr>
                    <td>${d.date}</td>
                    <td>${d.acc}</td>
                    <td>${d.desc}</td>
                    <td>${d.cat}</td>
                    <td style="text-align: right;" class="${d.amt > 0 ? 'neg-val' : 'pos-val'}">
                        ${d.amt < 0 ? '+' : ''}${Math.abs(d.amt).toFixed(2)}
                    </td>
                </tr>`;
        });

        document.getElementById('total-out').innerText = `$${outSum.toFixed(2)}`;
        document.getElementById('total-in').innerText = `$${inSum.toFixed(2)}`;
        document.getElementById('net-flow').innerText = `$${(inSum - outSum).toFixed(2)}`;
        document.getElementById('count-display').innerText = `Showing ${filtered.length} of ${allData.length} transactions`;
    }

    document.addEventListener('change', (e) => {
        if (e.target.matches('input[type="checkbox"]')) render();
    });

    render();
</script>
</body>
</html>
